# æ°‘å®¿æ¨èç³»ç»Ÿ - å®Œæ•´æŠ€æœ¯è§£æ

## ğŸ“– ç›®å½•
- [ç³»ç»Ÿç®€ä»‹](#ç³»ç»Ÿç®€ä»‹)
- [æ ¸å¿ƒåŠŸèƒ½](#æ ¸å¿ƒåŠŸèƒ½)
- [æŠ€æœ¯æ¶æ„](#æŠ€æœ¯æ¶æ„)
- [å…³é”®æ¥å£è¯¦è§£](#å…³é”®æ¥å£è¯¦è§£)
- [æ¨èç®—æ³•æ ¸å¿ƒé€»è¾‘](#æ¨èç®—æ³•æ ¸å¿ƒé€»è¾‘)
- [æ•°æ®æµç¨‹](#æ•°æ®æµç¨‹)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [é›¶åŸºç¡€å…¥é—¨æŒ‡å—](#é›¶åŸºç¡€å…¥é—¨æŒ‡å—)

---

## ç³»ç»Ÿç®€ä»‹

è¿™æ˜¯ä¸€ä¸ªåŸºäº **Spring Boot** å¼€å‘çš„æ°‘å®¿æ¨èç³»ç»Ÿï¼Œä¸ºç”¨æˆ·æä¾›ä¸ªæ€§åŒ–çš„æˆ¿æºæ¨èæœåŠ¡ã€‚ç³»ç»Ÿé€šè¿‡åˆ†æç”¨æˆ·çš„æµè§ˆã€æ”¶è—ã€é¢„è®¢ç­‰è¡Œä¸ºï¼Œç»“åˆæˆ¿æºçš„ç‰¹å¾ä¿¡æ¯ï¼Œä½¿ç”¨æ™ºèƒ½æ¨èç®—æ³•ä¸ºç”¨æˆ·æ¨èæœ€åˆé€‚çš„æ°‘å®¿ã€‚

### ğŸ¯ ç³»ç»Ÿç›®æ ‡
- **ç”¨æˆ·ç«¯**ï¼šå¸®åŠ©ç”¨æˆ·å¿«é€Ÿæ‰¾åˆ°ç¬¦åˆéœ€æ±‚çš„æ°‘å®¿
- **æˆ¿ä¸œç«¯**ï¼šå¸®åŠ©æˆ¿ä¸œæé«˜æˆ¿æºçš„æ›å…‰ç‡å’Œé¢„è®¢ç‡
- **ç®¡ç†å‘˜**ï¼šæä¾›å®Œå–„çš„åå°ç®¡ç†åŠŸèƒ½

---

## æ ¸å¿ƒåŠŸèƒ½

### 1. ç”¨æˆ·ç®¡ç†
- ç”¨æˆ·æ³¨å†Œå’Œç™»å½•ï¼ˆæ”¯æŒå¤šè§’è‰²ï¼šæ™®é€šç”¨æˆ·ã€æˆ¿ä¸œã€ç®¡ç†å‘˜ï¼‰
- ä¸ªäººä¿¡æ¯ç®¡ç†
- åŸºäº JWT çš„å®‰å…¨è®¤è¯

### 2. æˆ¿æºç®¡ç†
- æˆ¿æºå‘å¸ƒã€ç¼–è¾‘ã€åˆ é™¤ï¼ˆæˆ¿ä¸œåŠŸèƒ½ï¼‰
- æˆ¿æºå›¾ç‰‡ä¸Šä¼ 
- æˆ¿æºæœç´¢å’Œç­›é€‰
- æˆ¿æºè¯¦æƒ…æŸ¥çœ‹

### 3. è®¢å•ç®¡ç†
- åˆ›å»ºè®¢å•
- è®¢å•çŠ¶æ€ç®¡ç†ï¼ˆå¾…æ”¯ä»˜ã€å·²ç¡®è®¤ã€å·²å–æ¶ˆã€å·²å®Œæˆï¼‰
- é€€è®¢ç”³è¯·å’Œå®¡æ ¸

### 4. **æ™ºèƒ½æ¨èç³»ç»Ÿ**ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰
- æ··åˆæ¨èï¼ˆååŒè¿‡æ»¤ + å†…å®¹ç›¸ä¼¼ï¼‰
- ååŒè¿‡æ»¤æ¨è
- åŸºäºå†…å®¹çš„æ¨è

---

## æŠ€æœ¯æ¶æ„

### ğŸ› ï¸ æ ¸å¿ƒæŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **Spring Boot** | 2.7.18 | åç«¯æ¡†æ¶ï¼Œæä¾›å¿«é€Ÿå¼€å‘èƒ½åŠ› |
| **MyBatis-Plus** | 3.5.3.1 | æ•°æ®æŒä¹…å±‚æ¡†æ¶ï¼Œç®€åŒ–æ•°æ®åº“æ“ä½œ |
| **Spring Security** | - | å®‰å…¨æ¡†æ¶ï¼Œè´Ÿè´£è®¤è¯å’Œæˆæƒ |
| **JWT** | 0.11.5 | æ— çŠ¶æ€èº«ä»½è®¤è¯ä»¤ç‰Œ |
| **MySQL** | 8.0.33 | å…³ç³»å‹æ•°æ®åº“ï¼Œå­˜å‚¨ä¸šåŠ¡æ•°æ® |
| **Redis** | - | ç¼“å­˜æ•°æ®åº“ï¼Œæé«˜æ¨èæ€§èƒ½ |
| **Elasticsearch** | - | æœç´¢å¼•æ“ï¼Œæ”¯æŒå…¨æ–‡æ£€ç´¢ |
| **Lombok** | - | ç®€åŒ– Java ä»£ç ç¼–å†™ |

### ğŸ“¦ é¡¹ç›®ç»“æ„

```
src/main/java/com/recommendation/homestay/
â”œâ”€â”€ config/              # é…ç½®ç±»ï¼ˆå®‰å…¨ã€Redisã€è·¨åŸŸç­‰ï¼‰
â”œâ”€â”€ controller/          # æ§åˆ¶å™¨å±‚ï¼Œå¤„ç† HTTP è¯·æ±‚
â”œâ”€â”€ service/             # ä¸šåŠ¡é€»è¾‘å±‚
â”œâ”€â”€ mapper/              # æ•°æ®è®¿é—®å±‚ï¼ˆMyBatis-Plusï¼‰
â”œâ”€â”€ entity/              # å®ä½“ç±»ï¼ˆå¯¹åº”æ•°æ®åº“è¡¨ï¼‰
â”œâ”€â”€ dto/                 # æ•°æ®ä¼ è¾“å¯¹è±¡
â””â”€â”€ security/            # å®‰å…¨ç›¸å…³ï¼ˆJWTã€ç”¨æˆ·è®¤è¯ï¼‰
```

### ğŸ”„ ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‰ç«¯åº”ç”¨    â”‚
â”‚  (Vue/React) â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ HTTP/HTTPS
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Spring Boot åç«¯             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Controller   â”‚  â”‚  Security    â”‚â”‚
â”‚  â”‚ (æ¥å£å±‚)      â”‚  â”‚  (JWTè®¤è¯)   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚         â”‚                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚   Service    â”‚                   â”‚
â”‚  â”‚ (ä¸šåŠ¡é€»è¾‘å±‚)  â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚         â”‚                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚   Mapper     â”‚                   â”‚
â”‚  â”‚ (æ•°æ®è®¿é—®å±‚)  â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
    â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â–¼           â–¼          â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MySQL  â”‚  â”‚Redis â”‚  â”‚Elastic â”‚  â”‚ æ–‡ä»¶ç³»ç»Ÿâ”‚
â”‚(æ•°æ®åº“) â”‚  â”‚(ç¼“å­˜) â”‚  â”‚Search  â”‚  â”‚(å›¾ç‰‡)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å…³é”®æ¥å£è¯¦è§£

### ğŸ“Œ 1. è®¤è¯æ¥å£ (AuthController)

#### ğŸ” ç”¨æˆ·æ³¨å†Œ
**æ¥å£åœ°å€**: `POST /api/auth/register`

**ä½œç”¨**: åˆ›å»ºæ–°ç”¨æˆ·è´¦å·

**è¯·æ±‚å‚æ•°**:
```json
{
  "username": "testuser",      // ç”¨æˆ·åï¼ˆå¿…å¡«ï¼‰
  "email": "test@example.com", // é‚®ç®±ï¼ˆå¿…å¡«ï¼‰
  "password": "123456",        // å¯†ç ï¼ˆå¿…å¡«ï¼‰
  "role": "USER"              // è§’è‰²ï¼ˆå¯é€‰ï¼šUSER/LANDLORD/ADMINï¼‰
}
```

**æ ¸å¿ƒä»£ç é€»è¾‘**:
```java
// 1. æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å·²å­˜åœ¨
QueryWrapper<User> usernameQuery = new QueryWrapper<>();
usernameQuery.eq("username", request.getUsername());
if (userMapper.selectCount(usernameQuery) > 0) {
    throw new RuntimeException("ç”¨æˆ·åå·²å­˜åœ¨");
}

// 2. æ£€æŸ¥é‚®ç®±æ˜¯å¦å·²å­˜åœ¨
QueryWrapper<User> emailQuery = new QueryWrapper<>();
emailQuery.eq("email", request.getEmail());
if (userMapper.selectCount(emailQuery) > 0) {
    throw new RuntimeException("é‚®ç®±å·²å­˜åœ¨");
}

// 3. åŠ å¯†å¯†ç ï¼ˆä½¿ç”¨ BCrypt ç®—æ³•ï¼‰
user.setPassword(passwordEncoder.encode(request.getPassword()));

// 4. ä¿å­˜åˆ°æ•°æ®åº“
userMapper.insert(user);
```

**è¿”å›ç»“æœ**:
```json
{
  "success": true,
  "message": "ç”¨æˆ·æ³¨å†ŒæˆåŠŸ",
  "data": 1  // æ–°åˆ›å»ºçš„ç”¨æˆ·ID
}
```

---

#### ğŸ”‘ ç”¨æˆ·ç™»å½•
**æ¥å£åœ°å€**: `POST /api/auth/login`

**ä½œç”¨**: éªŒè¯ç”¨æˆ·å‡­è¯å¹¶è¿”å› JWT ä»¤ç‰Œ

**è¯·æ±‚å‚æ•°**:
```json
{
  "username": "testuser",
  "password": "123456"
}
```

**æ ¸å¿ƒä»£ç é€»è¾‘**:
```java
// 1. ä½¿ç”¨ Spring Security éªŒè¯ç”¨æˆ·åå’Œå¯†ç 
Authentication authentication = authenticationManager.authenticate(
    new UsernamePasswordAuthenticationToken(
        request.getUsername(),
        request.getPassword()
    )
);

// 2. éªŒè¯æˆåŠŸåï¼Œè®¾ç½®å®‰å…¨ä¸Šä¸‹æ–‡
SecurityContextHolder.getContext().setAuthentication(authentication);

// 3. ç”Ÿæˆ JWT ä»¤ç‰Œ
String jwt = tokenProvider.generateToken(authentication);

// 4. è¿”å›ä»¤ç‰Œå’Œç”¨æˆ·ä¿¡æ¯
return new JwtResponse(jwt, userId, username, email, role);
```

**è¿”å›ç»“æœ**:
```json
{
  "success": true,
  "message": "ç™»å½•æˆåŠŸ",
  "data": {
    "token": "eyJhbGciOiJIUzUxMiJ9...",  // JWTä»¤ç‰Œ
    "tokenType": "Bearer",
    "userId": 1,
    "username": "testuser",
    "email": "test@example.com",
    "role": "ROLE_USER"
  }
}
```

**ğŸ” JWT ä»¤ç‰Œè¯´æ˜**:
- JWT (JSON Web Token) æ˜¯ä¸€ç§æ— çŠ¶æ€çš„èº«ä»½è®¤è¯æ–¹å¼
- åç»­æ‰€æœ‰éœ€è¦è®¤è¯çš„æ¥å£éƒ½éœ€è¦åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦æ­¤ä»¤ç‰Œ
- æ ¼å¼: `Authorization: Bearer <token>`

---

### ğŸ“Œ 2. æˆ¿æºæ¥å£ (PropertyController)

#### ğŸ  åˆ›å»ºæˆ¿æº
**æ¥å£åœ°å€**: `POST /api/properties`

**æƒé™è¦æ±‚**: æˆ¿ä¸œæˆ–ç®¡ç†å‘˜

**ä½œç”¨**: å‘å¸ƒæ–°çš„æˆ¿æºä¿¡æ¯

**è¯·æ±‚å‚æ•°**:
```json
{
  "title": "æ¸©é¦¨æµ·æ™¯æ°‘å®¿",
  "description": "é¢æœå¤§æµ·ï¼Œæ˜¥æš–èŠ±å¼€",
  "city": "å¦é—¨",
  "address": "å¦é—¨å¸‚æ€æ˜åŒº",
  "price": 299.00,
  "bedrooms": 2,
  "bathrooms": 1,
  "propertyType": "å…¬å¯“",
  "images": "[\"url1\", \"url2\"]"
}
```

**æ ¸å¿ƒä»£ç é€»è¾‘**:
```java
// 1. åˆ›å»ºæˆ¿æºå¯¹è±¡
Property property = new Property();
property.setLandlordId(currentUser.getId());  // è®¾ç½®æˆ¿ä¸œID
property.setTitle(request.getTitle());
property.setPrice(request.getPrice());
// ... è®¾ç½®å…¶ä»–å­—æ®µ

// 2. åˆå§‹åŒ–ç»Ÿè®¡æ•°æ®
property.setViewCount(0);      // æµè§ˆé‡
property.setBookingCount(0);   // é¢„è®¢æ¬¡æ•°
property.setRating(5.0);       // åˆå§‹è¯„åˆ†
property.setAvailable(true);   // è®¾ç½®ä¸ºå¯ç”¨

// 3. ä¿å­˜åˆ°æ•°æ®åº“
propertyMapper.insert(property);
```

---

#### ğŸ” æœç´¢æˆ¿æº
**æ¥å£åœ°å€**: `GET /api/properties/search`

**ä½œç”¨**: æ ¹æ®æ¡ä»¶ç­›é€‰æˆ¿æº

**è¯·æ±‚å‚æ•°**:
- `city`: åŸå¸‚ï¼ˆå¯é€‰ï¼‰
- `minPrice`: æœ€ä½ä»·æ ¼ï¼ˆå¯é€‰ï¼‰
- `maxPrice`: æœ€é«˜ä»·æ ¼ï¼ˆå¯é€‰ï¼‰
- `bedrooms`: å§å®¤æ•°é‡ï¼ˆå¯é€‰ï¼‰
- `page`: é¡µç ï¼ˆé»˜è®¤0ï¼‰
- `size`: æ¯é¡µæ•°é‡ï¼ˆé»˜è®¤10ï¼‰

**æ ¸å¿ƒä»£ç é€»è¾‘**:
```java
// 1. æ„å»ºæŸ¥è¯¢æ¡ä»¶
QueryWrapper<Property> queryWrapper = new QueryWrapper<>();
queryWrapper.eq("available", true);  // åªæŸ¥è¯¢å¯ç”¨æˆ¿æº

// 2. åŠ¨æ€æ·»åŠ æŸ¥è¯¢æ¡ä»¶
if (city != null && !city.isEmpty()) {
    queryWrapper.like("city", city);  // æ¨¡ç³ŠåŒ¹é…åŸå¸‚
}
if (minPrice != null) {
    queryWrapper.ge("price", minPrice);  // ä»·æ ¼å¤§äºç­‰äºæœ€ä½ä»·
}
if (maxPrice != null) {
    queryWrapper.le("price", maxPrice);  // ä»·æ ¼å°äºç­‰äºæœ€é«˜ä»·
}
if (bedrooms != null) {
    queryWrapper.eq("bedrooms", bedrooms);  // ç²¾ç¡®åŒ¹é…å§å®¤æ•°
}

// 3. åˆ†é¡µæŸ¥è¯¢
Page<Property> page = new Page<>(pageNum, pageSize);
IPage<Property> result = propertyMapper.selectPage(page, queryWrapper);
```

---

### ğŸ“Œ 3. è®¢å•æ¥å£ (OrderController)

#### ğŸ“ åˆ›å»ºè®¢å•
**æ¥å£åœ°å€**: `POST /api/orders`

**ä½œç”¨**: ç”¨æˆ·é¢„è®¢æˆ¿æº

**è¯·æ±‚å‚æ•°**:
```json
{
  "propertyId": 1,
  "checkInDate": "2024-01-01",
  "checkOutDate": "2024-01-05",
  "guests": 2
}
```

**æ ¸å¿ƒä»£ç é€»è¾‘**:
```java
// 1. éªŒè¯æˆ¿æºæ˜¯å¦å¯ç”¨
Property property = propertyMapper.selectById(request.getPropertyId());
if (property == null || !property.getAvailable()) {
    throw new RuntimeException("æˆ¿æºä¸å¯ç”¨");
}

// 2. æ£€æŸ¥æ—¥æœŸå†²çª
boolean hasConflict = checkDateConflict(
    propertyId, checkInDate, checkOutDate
);
if (hasConflict) {
    throw new RuntimeException("è¯¥æ—¶é—´æ®µå·²è¢«é¢„è®¢");
}

// 3. è®¡ç®—æ€»ä»·
int nights = calculateNights(checkInDate, checkOutDate);
BigDecimal totalAmount = property.getPrice().multiply(new BigDecimal(nights));

// 4. åˆ›å»ºè®¢å•
Order order = new Order();
order.setOrderNumber(generateOrderNumber());  // ç”Ÿæˆè®¢å•å·
order.setUserId(currentUser.getId());
order.setPropertyId(propertyId);
order.setTotalAmount(totalAmount);
order.setStatus(OrderStatus.PENDING);  // åˆå§‹çŠ¶æ€ï¼šå¾…æ”¯ä»˜

// 5. ä¿å­˜è®¢å•
orderMapper.insert(order);

// 6. æ›´æ–°æˆ¿æºé¢„è®¢æ¬¡æ•°
property.setBookingCount(property.getBookingCount() + 1);
propertyMapper.updateById(property);
```

---

### ğŸ“Œ 4. **æ¨èæ¥å£ (RecommendationController)** â­ æ ¸å¿ƒåŠŸèƒ½

#### ğŸ¯ è·å–ç»¼åˆæ¨è
**æ¥å£åœ°å€**: `GET /api/recommendations`

**ä½œç”¨**: ä¸ºç”¨æˆ·æä¾›ä¸ªæ€§åŒ–çš„æˆ¿æºæ¨èï¼ˆæ··åˆç®—æ³•ï¼‰

**è¯·æ±‚å‚æ•°**:
- `limit`: è¿”å›æ¨èæ•°é‡ï¼ˆé»˜è®¤10ï¼‰

**è¿”å›ç»“æœ**:
```json
{
  "success": true,
  "message": "æ¨èåˆ—è¡¨è·å–æˆåŠŸ",
  "data": [
    {
      "id": 1,
      "title": "æ¸©é¦¨æµ·æ™¯æ°‘å®¿",
      "city": "å¦é—¨",
      "price": 299.00,
      "rating": 4.8
    }
    // ... æ›´å¤šæ¨èæˆ¿æº
  ]
}
```

---

#### ğŸ¤ ååŒè¿‡æ»¤æ¨è
**æ¥å£åœ°å€**: `GET /api/recommendations/collaborative`

**ä½œç”¨**: åŸºäºç›¸ä¼¼ç”¨æˆ·çš„è¡Œä¸ºæ¨èæˆ¿æº

**æ¨èé€»è¾‘**: "å–œæ¬¢ A æˆ¿æºçš„ç”¨æˆ·ä¹Ÿå–œæ¬¢ B æˆ¿æº"

---

#### ğŸ“Š å†…å®¹ç›¸ä¼¼æ¨è
**æ¥å£åœ°å€**: `GET /api/recommendations/content-based`

**ä½œç”¨**: åŸºäºæˆ¿æºç‰¹å¾çš„ç›¸ä¼¼åº¦æ¨è

**æ¨èé€»è¾‘**: "ä½ å–œæ¬¢çš„æˆ¿æºä¸è¿™äº›æˆ¿æºå¾ˆç›¸ä¼¼"

---

## æ¨èç®—æ³•æ ¸å¿ƒé€»è¾‘

### ğŸ§  1. æ··åˆæ¨èç®—æ³•ï¼ˆæ ¸å¿ƒï¼‰

**ç®—æ³•æ€è·¯**: ç»“åˆååŒè¿‡æ»¤å’Œå†…å®¹ç›¸ä¼¼ä¸¤ç§ç®—æ³•ï¼Œå–é•¿è¡¥çŸ­

**å®ç°æ­¥éª¤**:

```java
public List<Property> getRecommendations(Long userId, int limit) {
    // æ­¥éª¤1ï¼šè·å–ä¸¤ç§ç®—æ³•çš„æ¨èç»“æœï¼ˆå„å– limit*2 ä¸ªå€™é€‰ï¼‰
    List<Property> collaborative = getCollaborativeFilteringRecommendations(userId, limit * 2);
    List<Property> contentBased = getContentBasedRecommendations(userId, limit * 2);
    
    // æ­¥éª¤2ï¼šä¸ºæ¯ä¸ªæˆ¿æºè®¡ç®—ç»¼åˆå¾—åˆ†
    Map<Long, Double> propertyScores = new HashMap<>();
    
    // æ­¥éª¤3ï¼šååŒè¿‡æ»¤æƒé‡ 60%
    for (int i = 0; i < collaborative.size(); i++) {
        Property property = collaborative.get(i);
        // æ’åè¶Šé å‰ï¼Œå¾—åˆ†è¶Šé«˜
        double score = (collaborative.size() - i) * 0.6;
        propertyScores.merge(property.getId(), score, Double::sum);
    }
    
    // æ­¥éª¤4ï¼šå†…å®¹ç›¸ä¼¼æƒé‡ 40%
    for (int i = 0; i < contentBased.size(); i++) {
        Property property = contentBased.get(i);
        double score = (contentBased.size() - i) * 0.4;
        propertyScores.merge(property.getId(), score, Double::sum);
    }
    
    // æ­¥éª¤5ï¼šæŒ‰ç»¼åˆå¾—åˆ†æ’åºï¼Œè¿”å›å‰ N ä¸ª
    return propertyScores.entrySet().stream()
        .sorted(Map.Entry.<Long, Double>comparingByValue().reversed())
        .limit(limit)
        .map(entry -> propertyMapper.selectById(entry.getKey()))
        .collect(Collectors.toList());
}
```

**ç®—æ³•ä¼˜åŠ¿**:
- âœ… ç»“åˆäº†ç”¨æˆ·è¡Œä¸ºå’Œæˆ¿æºç‰¹å¾
- âœ… é¿å…äº†å•ä¸€ç®—æ³•çš„å±€é™æ€§
- âœ… æ¨èç»“æœæ›´åŠ å‡†ç¡®å’Œå¤šæ ·åŒ–

---

### ğŸ¤ 2. ååŒè¿‡æ»¤æ¨èç®—æ³•

**æ ¸å¿ƒæ€æƒ³**: æ‰¾åˆ°å’Œä½ å…´è¶£ç›¸ä¼¼çš„ç”¨æˆ·ï¼Œæ¨èä»–ä»¬å–œæ¬¢çš„æˆ¿æº

**ç®—æ³•æµç¨‹**:

```
ç”¨æˆ·Aæµè§ˆäº†æˆ¿æº [1, 2, 3]
ç”¨æˆ·Bæµè§ˆäº†æˆ¿æº [2, 3, 4, 5]
ç”¨æˆ·Cæµè§ˆäº†æˆ¿æº [1, 2, 6]

è®¡ç®—ç›¸ä¼¼åº¦ï¼š
- ç”¨æˆ·Aå’ŒBçš„ç›¸ä¼¼åº¦ = äº¤é›†{2,3} / å¹¶é›†{1,2,3,4,5} = 2/5 = 0.4
- ç”¨æˆ·Aå’ŒCçš„ç›¸ä¼¼åº¦ = äº¤é›†{1,2} / å¹¶é›†{1,2,3,6} = 2/4 = 0.5

å› ä¸ºCæ›´ç›¸ä¼¼ï¼Œæ‰€ä»¥å‘Aæ¨èæˆ¿æº6
```

**è¯¦ç»†å®ç°**:

```java
public List<Property> getCollaborativeFilteringRecommendations(Long userId, int limit) {
    // æ­¥éª¤1ï¼šè·å–å½“å‰ç”¨æˆ·çš„äº¤äº’è®°å½•
    List<UserPropertyInteraction> userInteractions = 
        interactionMapper.selectList(
            new QueryWrapper<UserPropertyInteraction>().eq("user_id", userId)
        );
    
    // å†·å¯åŠ¨å¤„ç†ï¼šå¦‚æœç”¨æˆ·æ²¡æœ‰äº¤äº’è®°å½•ï¼Œè¿”å›çƒ­é—¨æˆ¿æº
    if (userInteractions.isEmpty()) {
        return propertyMapper.findTop10ByAvailableTrueOrderByBookingCountDesc();
    }
    
    // æ­¥éª¤2ï¼šæ„å»ºæ‰€æœ‰ç”¨æˆ·çš„æˆ¿æºäº¤äº’é›†åˆ
    // æ•°æ®ç»“æ„ï¼šMap<ç”¨æˆ·ID, Set<æˆ¿æºID>>
    Map<Long, Set<Long>> userPropertyMap = new HashMap<>();
    List<UserPropertyInteraction> allInteractions = interactionMapper.selectList(null);
    
    for (UserPropertyInteraction interaction : allInteractions) {
        userPropertyMap.computeIfAbsent(interaction.getUserId(), k -> new HashSet<>())
                       .add(interaction.getPropertyId());
    }
    
    // æ­¥éª¤3ï¼šè®¡ç®—å½“å‰ç”¨æˆ·ä¸å…¶ä»–ç”¨æˆ·çš„ç›¸ä¼¼åº¦ï¼ˆä½¿ç”¨æ°å¡å¾·ç›¸ä¼¼åº¦ï¼‰
    Set<Long> currentUserProperties = userPropertyMap.get(userId);
    Map<Long, Double> similarityScores = new HashMap<>();
    
    for (Map.Entry<Long, Set<Long>> entry : userPropertyMap.entrySet()) {
        Long otherUserId = entry.getKey();
        if (otherUserId.equals(userId)) continue;  // è·³è¿‡è‡ªå·±
        
        Set<Long> otherUserProperties = entry.getValue();
        double similarity = calculateJaccardSimilarity(
            currentUserProperties, 
            otherUserProperties
        );
        
        if (similarity > 0) {
            similarityScores.put(otherUserId, similarity);
        }
    }
    
    // æ­¥éª¤4ï¼šæ ¹æ®ç›¸ä¼¼ç”¨æˆ·çš„äº¤äº’æ±‡æ€»æ¨èå¾—åˆ†
    Set<Long> interactedPropertyIds = currentUserProperties;
    Map<Long, Double> recommendationScores = new HashMap<>();
    
    for (Map.Entry<Long, Double> entry : similarityScores.entrySet()) {
        Long similarUserId = entry.getKey();
        Double similarity = entry.getValue();
        
        Set<Long> similarUserProperties = userPropertyMap.get(similarUserId);
        for (Long propertyId : similarUserProperties) {
            // åªæ¨èç”¨æˆ·æœªäº¤äº’è¿‡çš„æˆ¿æº
            if (!interactedPropertyIds.contains(propertyId)) {
                // å¾—åˆ† = ç›¸ä¼¼ç”¨æˆ·çš„ç›¸ä¼¼åº¦ç´¯åŠ 
                recommendationScores.merge(propertyId, similarity, Double::sum);
            }
        }
    }
    
    // æ­¥éª¤5ï¼šæŒ‰å¾—åˆ†æ’åºï¼Œè¿”å›å‰Nä¸ª
    return recommendationScores.entrySet().stream()
        .sorted(Map.Entry.<Long, Double>comparingByValue().reversed())
        .limit(limit)
        .map(entry -> propertyMapper.selectById(entry.getKey()))
        .filter(Objects::nonNull)
        .filter(Property::getAvailable)
        .collect(Collectors.toList());
}

// æ°å¡å¾·ç›¸ä¼¼åº¦è®¡ç®—
private double calculateJaccardSimilarity(Set<Long> set1, Set<Long> set2) {
    Set<Long> intersection = new HashSet<>(set1);
    intersection.retainAll(set2);  // äº¤é›†
    
    Set<Long> union = new HashSet<>(set1);
    union.addAll(set2);  // å¹¶é›†
    
    return union.isEmpty() ? 0.0 : (double) intersection.size() / union.size();
}
```

**æ°å¡å¾·ç›¸ä¼¼åº¦ (Jaccard Similarity)**:
```
ç›¸ä¼¼åº¦ = |A âˆ© B| / |A âˆª B|

ä¾‹å¦‚ï¼š
ç”¨æˆ·Aå–œæ¬¢æˆ¿æº {1, 2, 3}
ç”¨æˆ·Bå–œæ¬¢æˆ¿æº {2, 3, 4}
äº¤é›† = {2, 3}ï¼Œå¤§å°ä¸º2
å¹¶é›† = {1, 2, 3, 4}ï¼Œå¤§å°ä¸º4
ç›¸ä¼¼åº¦ = 2/4 = 0.5
```

---

### ğŸ“Š 3. åŸºäºå†…å®¹çš„æ¨èç®—æ³•

**æ ¸å¿ƒæ€æƒ³**: åˆ†æç”¨æˆ·å–œæ¬¢çš„æˆ¿æºç‰¹å¾ï¼Œæ¨èå…·æœ‰ç›¸ä¼¼ç‰¹å¾çš„å…¶ä»–æˆ¿æº

**ç”¨æˆ·åå¥½ç‰¹å¾**:
- åŸå¸‚åå¥½ï¼ˆä¾‹å¦‚ï¼šç”¨æˆ·ç»å¸¸æµè§ˆåŒ—äº¬çš„æˆ¿æºï¼‰
- æˆ¿æºç±»å‹åå¥½ï¼ˆä¾‹å¦‚ï¼šç”¨æˆ·å–œæ¬¢å…¬å¯“å‹æˆ¿æºï¼‰
- ä»·æ ¼åå¥½ï¼ˆä¾‹å¦‚ï¼šç”¨æˆ·å–œæ¬¢200-300å…ƒçš„æˆ¿æºï¼‰
- å§å®¤æ•°åå¥½ï¼ˆä¾‹å¦‚ï¼šç”¨æˆ·å–œæ¬¢2å±…å®¤ï¼‰

**è¯¦ç»†å®ç°**:

```java
public List<Property> getContentBasedRecommendations(Long userId, int limit) {
    // æ­¥éª¤1ï¼šæŸ¥è¯¢ç”¨æˆ·çš„äº¤äº’è®°å½•
    List<UserPropertyInteraction> userInteractions = 
        interactionMapper.selectList(
            new QueryWrapper<UserPropertyInteraction>().eq("user_id", userId)
        );
    
    // å†·å¯åŠ¨ï¼šæ— äº¤äº’è®°å½•æ—¶è¿”å›é«˜è¯„åˆ†æˆ¿æº
    if (userInteractions.isEmpty()) {
        return propertyMapper.findTop10ByAvailableTrueOrderByRatingDesc();
    }
    
    // æ­¥éª¤2ï¼šç­›é€‰ç”¨æˆ·"å–œæ¬¢"çš„æˆ¿æºï¼ˆæ­£å‘äº¤äº’ï¼‰
    List<Property> likedProperties = new ArrayList<>();
    for (UserPropertyInteraction interaction : userInteractions) {
        boolean isPositive = 
            interaction.getType() == InteractionType.FAVORITE ||  // æ”¶è—
            interaction.getType() == InteractionType.BOOK ||      // é¢„è®¢
            (interaction.getRating() != null && interaction.getRating() >= 4);  // é«˜è¯„åˆ†
        
        if (isPositive) {
            Property property = propertyMapper.selectById(interaction.getPropertyId());
            if (property != null) {
                likedProperties.add(property);
            }
        }
    }
    
    // æ­¥éª¤3ï¼šæå–ç”¨æˆ·åå¥½ç‰¹å¾
    Map<String, Integer> cityPreferences = new HashMap<>();     // åŸå¸‚åå¥½
    Map<String, Integer> typePreferences = new HashMap<>();     // ç±»å‹åå¥½
    double totalPrice = 0.0;
    int totalBedrooms = 0;
    
    for (Property property : likedProperties) {
        cityPreferences.merge(property.getCity(), 1, Integer::sum);
        typePreferences.merge(property.getPropertyType(), 1, Integer::sum);
        totalPrice += property.getPrice().doubleValue();
        totalBedrooms += property.getBedrooms();
    }
    
    // è®¡ç®—å¹³å‡åå¥½å€¼
    double avgPrice = totalPrice / likedProperties.size();
    int avgBedrooms = totalBedrooms / likedProperties.size();
    
    // æ­¥éª¤4ï¼šæŸ¥è¯¢æ‰€æœ‰å¯ç”¨æˆ¿æº
    List<Property> allProperties = 
        propertyMapper.selectList(
            new QueryWrapper<Property>().eq("available", true)
        );
    
    // è¿‡æ»¤å·²äº¤äº’çš„æˆ¿æº
    Set<Long> interactedIds = userInteractions.stream()
        .map(UserPropertyInteraction::getPropertyId)
        .collect(Collectors.toSet());
    
    // æ­¥éª¤5ï¼šä¸ºæ¯ä¸ªå€™é€‰æˆ¿æºæ‰“åˆ†
    Map<Long, Double> propertyScores = new HashMap<>();
    
    for (Property property : allProperties) {
        if (interactedIds.contains(property.getId())) {
            continue;  // è·³è¿‡å·²äº¤äº’çš„
        }
        
        double score = 0.0;
        
        // 5.1 åŸå¸‚åå¥½å¾—åˆ†ï¼ˆæƒé‡30%ï¼‰
        if (cityPreferences.containsKey(property.getCity())) {
            score += cityPreferences.get(property.getCity()) * 0.3;
        }
        
        // 5.2 æˆ¿æºç±»å‹å¾—åˆ†ï¼ˆæƒé‡20%ï¼‰
        if (typePreferences.containsKey(property.getPropertyType())) {
            score += typePreferences.get(property.getPropertyType()) * 0.2;
        }
        
        // 5.3 ä»·æ ¼ç›¸ä¼¼åº¦å¾—åˆ†ï¼ˆæƒé‡25%ï¼‰
        // ä»·æ ¼è¶Šæ¥è¿‘ç”¨æˆ·åå¥½ï¼Œå¾—åˆ†è¶Šé«˜
        double priceDiff = Math.abs(property.getPrice().doubleValue() - avgPrice);
        double priceSimilarity = 1.0 / (1.0 + priceDiff / avgPrice);
        score += priceSimilarity * 0.25;
        
        // 5.4 å§å®¤æ•°ç›¸ä¼¼åº¦å¾—åˆ†ï¼ˆæƒé‡15%ï¼‰
        int bedroomDiff = Math.abs(property.getBedrooms() - avgBedrooms);
        double bedroomSimilarity = 1.0 / (1.0 + bedroomDiff);
        score += bedroomSimilarity * 0.15;
        
        // 5.5 æˆ¿æºè¯„åˆ†åŠ åˆ†ï¼ˆæƒé‡10%ï¼‰
        score += (property.getRating().doubleValue() / 5.0) * 0.1;
        
        propertyScores.put(property.getId(), score);
    }
    
    // æ­¥éª¤6ï¼šæŒ‰å¾—åˆ†æ’åºï¼Œè¿”å›å‰Nä¸ª
    return propertyScores.entrySet().stream()
        .sorted((e1, e2) -> Double.compare(e2.getValue(), e1.getValue()))
        .limit(limit)
        .map(entry -> propertyMapper.selectById(entry.getKey()))
        .filter(Objects::nonNull)
        .collect(Collectors.toList());
}
```

**æ‰“åˆ†æƒé‡è¯´æ˜**:
- åŸå¸‚åå¥½ï¼š30%ï¼ˆä½ç½®æ˜¯é€‰æ‹©æ°‘å®¿çš„é‡è¦å› ç´ ï¼‰
- æˆ¿æºç±»å‹ï¼š20%ï¼ˆç”¨æˆ·å¯¹å…¬å¯“ã€åˆ«å¢…ç­‰æœ‰æ˜ç¡®åå¥½ï¼‰
- ä»·æ ¼ç›¸ä¼¼åº¦ï¼š25%ï¼ˆä»·æ ¼æ˜¯å…³é”®å†³ç­–å› ç´ ï¼‰
- å§å®¤æ•°ç›¸ä¼¼åº¦ï¼š15%ï¼ˆåæ˜ ä½å®¿äººæ•°éœ€æ±‚ï¼‰
- æˆ¿æºè¯„åˆ†ï¼š10%ï¼ˆä¿è¯æ¨èè´¨é‡ï¼‰

---

## æ•°æ®æµç¨‹

### ğŸ“ˆ ç”¨æˆ·è¡Œä¸ºæ•°æ®æ”¶é›†

```
ç”¨æˆ·æ“ä½œ â†’ ç”Ÿæˆäº¤äº’è®°å½• â†’ å­˜å…¥æ•°æ®åº“ â†’ å½±å“æ¨èç»“æœ
```

**äº¤äº’ç±»å‹**:
- `VIEW`: æµè§ˆæˆ¿æºï¼ˆæŸ¥çœ‹è¯¦æƒ…æ—¶è‡ªåŠ¨è®°å½•ï¼‰
- `FAVORITE`: æ”¶è—æˆ¿æº
- `BOOK`: é¢„è®¢æˆ¿æº
- `RATING`: è¯„ä»·æˆ¿æº

**æ•°æ®è¡¨ç»“æ„** (`user_property_interaction`):
```sql
CREATE TABLE user_property_interaction (
    id BIGINT PRIMARY KEY,
    user_id BIGINT,          -- ç”¨æˆ·ID
    property_id BIGINT,      -- æˆ¿æºID
    type VARCHAR(20),        -- äº¤äº’ç±»å‹
    rating INT,              -- è¯„åˆ†ï¼ˆ1-5ï¼‰
    created_at TIMESTAMP     -- äº¤äº’æ—¶é—´
);
```

---

### ğŸ”„ æ¨èæµç¨‹å®Œæ•´ç¤ºä¾‹

**åœºæ™¯**: ç”¨æˆ·å°æ˜æƒ³æŸ¥çœ‹æ¨èæˆ¿æº

```
æ­¥éª¤1ï¼šå‰ç«¯å‘èµ·è¯·æ±‚
GET /api/recommendations?limit=10
Headers: Authorization: Bearer <JWTä»¤ç‰Œ>

æ­¥éª¤2ï¼šåç«¯éªŒè¯JWTä»¤ç‰Œ
- è§£æä»¤ç‰Œè·å–ç”¨æˆ·IDï¼ˆå‡è®¾ä¸º101ï¼‰
- éªŒè¯ä»¤ç‰Œæœ‰æ•ˆæ€§
- æ£€æŸ¥ç”¨æˆ·æƒé™

æ­¥éª¤3ï¼šè°ƒç”¨æ¨èæœåŠ¡
recommendationService.getRecommendations(101, 10)

æ­¥éª¤4ï¼šæ‰§è¡Œæ¨èç®—æ³•
4.1 è°ƒç”¨ååŒè¿‡æ»¤ç®—æ³•
    - æŸ¥è¯¢ç”¨æˆ·101çš„äº¤äº’è®°å½• [æˆ¿æº1, æˆ¿æº2, æˆ¿æº3]
    - æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·çš„äº¤äº’è®°å½•
    - æ‰¾åˆ°ç›¸ä¼¼ç”¨æˆ·ï¼šç”¨æˆ·102ï¼ˆç›¸ä¼¼åº¦0.6ï¼‰ã€ç”¨æˆ·103ï¼ˆç›¸ä¼¼åº¦0.5ï¼‰
    - æ±‡æ€»ç›¸ä¼¼ç”¨æˆ·å–œæ¬¢ä½†ç”¨æˆ·101æœªäº¤äº’çš„æˆ¿æº
    - ç»“æœï¼š[æˆ¿æº5(å¾—åˆ†1.1), æˆ¿æº7(å¾—åˆ†0.6), æˆ¿æº9(å¾—åˆ†0.5)]

4.2 è°ƒç”¨å†…å®¹æ¨èç®—æ³•
    - åˆ†æç”¨æˆ·101å–œæ¬¢çš„æˆ¿æºç‰¹å¾
      åŸå¸‚ï¼šå¦é—¨ï¼ˆ2æ¬¡ï¼‰ã€åŒ—äº¬ï¼ˆ1æ¬¡ï¼‰
      ç±»å‹ï¼šå…¬å¯“ï¼ˆ2æ¬¡ï¼‰ã€åˆ«å¢…ï¼ˆ1æ¬¡ï¼‰
      å¹³å‡ä»·æ ¼ï¼š280å…ƒ
      å¹³å‡å§å®¤ï¼š2é—´
    - å¯¹æ‰€æœ‰å¯ç”¨æˆ¿æºæ‰“åˆ†
    - ç»“æœï¼š[æˆ¿æº4(å¾—åˆ†2.8), æˆ¿æº5(å¾—åˆ†2.5), æˆ¿æº8(å¾—åˆ†2.1)]

4.3 æ··åˆç®—æ³•èåˆ
    æˆ¿æº5: 1.1*0.6 + 2.5*0.4 = 1.66
    æˆ¿æº4: 0*0.6 + 2.8*0.4 = 1.12
    æˆ¿æº7: 0.6*0.6 + 0*0.4 = 0.36
    æˆ¿æº8: 0*0.6 + 2.1*0.4 = 0.84
    æˆ¿æº9: 0.5*0.6 + 0*0.4 = 0.30
    
    æœ€ç»ˆæ’åºï¼š[æˆ¿æº5, æˆ¿æº4, æˆ¿æº8, æˆ¿æº7, æˆ¿æº9]

æ­¥éª¤5ï¼šè¿”å›ç»“æœ
{
  "success": true,
  "message": "æ¨èåˆ—è¡¨è·å–æˆåŠŸ",
  "data": [
    {æˆ¿æº5çš„è¯¦ç»†ä¿¡æ¯},
    {æˆ¿æº4çš„è¯¦ç»†ä¿¡æ¯},
    ...
  ]
}
```

---

## å¿«é€Ÿå¼€å§‹

### ğŸ“‹ ç¯å¢ƒè¦æ±‚
- JDK 11+
- Maven 3.6+
- MySQL 8.0+
- Redis (å¯é€‰ï¼Œç”¨äºç¼“å­˜)
- Elasticsearch (å¯é€‰ï¼Œç”¨äºæœç´¢)

### ğŸš€ å¯åŠ¨æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
```bash
git clone <repository-url>
cd springboot-recommendation-system
```

2. **é…ç½®æ•°æ®åº“**
```bash
# åˆ›å»ºæ•°æ®åº“
mysql -u root -p
CREATE DATABASE homestay_recommendation;

# å¯¼å…¥SQLè„šæœ¬
mysql -u root -p homestay_recommendation < sql/schema.sql
```

3. **ä¿®æ”¹é…ç½®æ–‡ä»¶**
ç¼–è¾‘ `src/main/resources/application.properties`:
```properties
# æ•°æ®åº“é…ç½®
spring.datasource.url=jdbc:mysql://localhost:3306/homestay_recommendation
spring.datasource.username=root
spring.datasource.password=your_password

# Redisé…ç½®ï¼ˆå¯é€‰ï¼‰
spring.redis.host=localhost
spring.redis.port=6379

# JWTå¯†é’¥
jwt.secret=your-secret-key
jwt.expiration=86400000
```

4. **ç¼–è¯‘è¿è¡Œ**
```bash
# ä½¿ç”¨Mavenç¼–è¯‘
mvn clean package

# è¿è¡Œåº”ç”¨
java -jar target/homestay-recommendation-1.0.0.jar

# æˆ–ä½¿ç”¨Mavenç›´æ¥è¿è¡Œ
mvn spring-boot:run
```

5. **è®¿é—®æ¥å£**
- åç«¯API: `http://localhost:8080`
- Swaggeræ–‡æ¡£: `http://localhost:8080/swagger-ui/index.html`

---

## é›¶åŸºç¡€å…¥é—¨æŒ‡å—

### ğŸ“ ä»€ä¹ˆæ˜¯ Spring Bootï¼Ÿ

Spring Boot æ˜¯ä¸€ä¸ª Java å¼€å‘æ¡†æ¶ï¼Œå®ƒå¸®åŠ©å¼€å‘è€…å¿«é€Ÿæ„å»º Web åº”ç”¨ã€‚å°±åƒæ­ç§¯æœ¨ä¸€æ ·ï¼ŒSpring Boot æä¾›äº†å¾ˆå¤šç°æˆçš„"ç§¯æœ¨"ï¼ˆç»„ä»¶ï¼‰ï¼Œæˆ‘ä»¬åªéœ€è¦ç»„è£…å’Œé…ç½®å°±èƒ½å¿«é€Ÿå¼€å‘ã€‚

### ğŸ“ ä»€ä¹ˆæ˜¯ REST APIï¼Ÿ

REST API æ˜¯ä¸€ç§ç½‘ç»œæ¥å£è®¾è®¡é£æ ¼ã€‚ç®€å•ç†è§£ï¼š
- **URL** æ˜¯åœ°å€ï¼š`/api/properties` è¡¨ç¤ºæˆ¿æºç›¸å…³çš„åŠŸèƒ½
- **HTTP æ–¹æ³•** æ˜¯æ“ä½œï¼š
  - `GET`: æŸ¥è¯¢æ•°æ®ï¼ˆä¾‹å¦‚ï¼šè·å–æˆ¿æºåˆ—è¡¨ï¼‰
  - `POST`: åˆ›å»ºæ•°æ®ï¼ˆä¾‹å¦‚ï¼šå‘å¸ƒæ–°æˆ¿æºï¼‰
  - `PUT`: æ›´æ–°æ•°æ®ï¼ˆä¾‹å¦‚ï¼šä¿®æ”¹æˆ¿æºä¿¡æ¯ï¼‰
  - `DELETE`: åˆ é™¤æ•°æ®ï¼ˆä¾‹å¦‚ï¼šåˆ é™¤æˆ¿æºï¼‰

### ğŸ“ ä»€ä¹ˆæ˜¯ JWTï¼Ÿ

JWT (JSON Web Token) æ˜¯ä¸€ç§èº«ä»½è®¤è¯æ–¹å¼ã€‚

**ä¼ ç»Ÿæ–¹å¼** (Session):
```
1. ç”¨æˆ·ç™»å½• â†’ æœåŠ¡å™¨ç”ŸæˆSessionå¹¶å­˜å‚¨
2. æœåŠ¡å™¨è¿”å›SessionID
3. åç»­è¯·æ±‚æºå¸¦SessionID
4. æœåŠ¡å™¨æŸ¥æ‰¾SessionéªŒè¯èº«ä»½
```

**JWTæ–¹å¼**:
```
1. ç”¨æˆ·ç™»å½• â†’ æœåŠ¡å™¨ç”ŸæˆJWTä»¤ç‰Œï¼ˆåŒ…å«ç”¨æˆ·ä¿¡æ¯ï¼‰
2. æœåŠ¡å™¨è¿”å›JWTä»¤ç‰Œ
3. åç»­è¯·æ±‚æºå¸¦JWTä»¤ç‰Œ
4. æœåŠ¡å™¨ç›´æ¥è§£æJWTéªŒè¯èº«ä»½ï¼ˆæ— éœ€æŸ¥æ•°æ®åº“ï¼‰
```

**ä¼˜åŠ¿**: æœåŠ¡å™¨æ— éœ€å­˜å‚¨çŠ¶æ€ï¼Œæ›´æ˜“æ‰©å±•

### ğŸ“ ä»€ä¹ˆæ˜¯ MyBatis-Plusï¼Ÿ

MyBatis-Plus æ˜¯ä¸€ä¸ªæ•°æ®åº“æ“ä½œæ¡†æ¶ï¼Œç®€åŒ–äº† SQL ç¼–å†™ã€‚

**ä¼ ç»Ÿæ–¹å¼**:
```java
// éœ€è¦æ‰‹å†™SQL
@Select("SELECT * FROM property WHERE id = #{id}")
Property getPropertyById(Long id);
```

**MyBatis-Plus æ–¹å¼**:
```java
// è‡ªåŠ¨ç”ŸæˆSQLï¼Œæ— éœ€æ‰‹å†™
Property property = propertyMapper.selectById(id);
```

### ğŸ“ æ¨èç®—æ³•å¦‚ä½•å·¥ä½œï¼Ÿ

**é€šä¿—è§£é‡Š**:

1. **ååŒè¿‡æ»¤** = "ç‰©ä»¥ç±»èšï¼Œäººä»¥ç¾¤åˆ†"
   ```
   ä½ å’Œå°æéƒ½å–œæ¬¢çœ‹ç§‘å¹»ç”µå½±
   å°æè¿˜å–œæ¬¢çœ‹æƒŠæ‚šç‰‡
   é‚£ä¹ˆç³»ç»Ÿä¼šå‘ä½ æ¨èæƒŠæ‚šç‰‡
   ```

2. **å†…å®¹æ¨è** = "ä½ å–œæ¬¢è¿™ä¸ªï¼Œé‚£ä½ å¯èƒ½ä¹Ÿå–œæ¬¢é‚£ä¸ª"
   ```
   ä½ å–œæ¬¢çš„æ°‘å®¿éƒ½åœ¨æµ·è¾¹
   ç³»ç»Ÿä¼šç»§ç»­æ¨èæµ·è¾¹çš„æ°‘å®¿
   ```

3. **æ··åˆæ¨è** = "ç»¼åˆè€ƒè™‘ï¼Œç»™ä½ æœ€å¥½çš„"
   ```
   60%è€ƒè™‘ç›¸ä¼¼ç”¨æˆ·çš„é€‰æ‹©
   40%è€ƒè™‘æˆ¿æºæœ¬èº«çš„ç‰¹å¾
   ```

### ğŸ“ å¦‚ä½•æµ‹è¯•æ¥å£ï¼Ÿ

**æ–¹æ³•1: ä½¿ç”¨ Swagger UI**
1. å¯åŠ¨é¡¹ç›®åè®¿é—®ï¼š`http://localhost:8080/swagger-ui/index.html`
2. é€‰æ‹©æ¥å£
3. ç‚¹å‡» "Try it out"
4. å¡«å†™å‚æ•°
5. ç‚¹å‡» "Execute"

**æ–¹æ³•2: ä½¿ç”¨ Postman**
1. ä¸‹è½½å®‰è£… Postman
2. åˆ›å»ºæ–°è¯·æ±‚
3. è®¾ç½®è¯·æ±‚æ–¹æ³•å’ŒURL
4. æ·»åŠ è¯·æ±‚å¤´ï¼ˆJWTè®¤è¯ï¼‰ï¼š
   ```
   Key: Authorization
   Value: Bearer <your-jwt-token>
   ```
5. å‘é€è¯·æ±‚

**æ–¹æ³•3: ä½¿ç”¨ curl å‘½ä»¤**
```bash
# æ³¨å†Œç”¨æˆ·
curl -X POST http://localhost:8080/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{"username":"test","email":"test@example.com","password":"123456"}'

# ç™»å½•
curl -X POST http://localhost:8080/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"test","password":"123456"}'

# è·å–æ¨èï¼ˆéœ€è¦æ›¿æ¢<token>ä¸ºç™»å½•è¿”å›çš„ä»¤ç‰Œï¼‰
curl -X GET http://localhost:8080/api/recommendations \
  -H "Authorization: Bearer <token>"
```

### ğŸ“ å¸¸è§é—®é¢˜

**Q: ä¸ºä»€ä¹ˆéœ€è¦ JWT è®¤è¯ï¼Ÿ**
A: ä¸ºäº†å®‰å…¨ï¼åªæœ‰ç™»å½•çš„ç”¨æˆ·æ‰èƒ½è®¿é—®æŸäº›æ¥å£ï¼Œé˜²æ­¢æœªæˆæƒè®¿é—®ã€‚

**Q: æ¨èç®—æ³•çš„æ•°æ®ä»å“ªé‡Œæ¥ï¼Ÿ**
A: æ¥è‡ªç”¨æˆ·çš„æµè§ˆã€æ”¶è—ã€é¢„è®¢ç­‰è¡Œä¸ºè®°å½•ï¼Œå­˜å‚¨åœ¨ `user_property_interaction` è¡¨ä¸­ã€‚

**Q: å¦‚æœæ–°ç”¨æˆ·æ²¡æœ‰å†å²æ•°æ®æ€ä¹ˆåŠï¼Ÿ**
A: è¿™å«"å†·å¯åŠ¨é—®é¢˜"ã€‚ç³»ç»Ÿä¼šæ¨èçƒ­é—¨æˆ¿æºæˆ–é«˜è¯„åˆ†æˆ¿æºä½œä¸ºåˆå§‹æ¨èã€‚

**Q: æ¨èç»“æœä¼šå®æ—¶æ›´æ–°å—ï¼Ÿ**
A: ä¼šçš„ï¼æ¯æ¬¡ç”¨æˆ·æµè§ˆæˆ–é¢„è®¢æˆ¿æºæ—¶ï¼Œç³»ç»Ÿéƒ½ä¼šè®°å½•ï¼Œå½±å“ä¸‹æ¬¡çš„æ¨èç»“æœã€‚

---

## ğŸ“š æ ¸å¿ƒæ¦‚å¿µæ€»ç»“

### åˆ†å±‚æ¶æ„
```
Controller  â†’ æ¥æ”¶HTTPè¯·æ±‚ï¼Œè°ƒç”¨Service
    â†“
Service     â†’ å®ç°ä¸šåŠ¡é€»è¾‘ï¼Œè°ƒç”¨Mapper
    â†“
Mapper      â†’ æ‰§è¡Œæ•°æ®åº“æ“ä½œ
    â†“
Database    â†’ å­˜å‚¨æ•°æ®
```

### æ•°æ®æµè½¬
```
å‰ç«¯ â†’ Controller â†’ Service â†’ Mapper â†’ MySQL
                â†“
              Redis (ç¼“å­˜)
                â†“
         Elasticsearch (æœç´¢)
```

### å®‰å…¨æœºåˆ¶
```
è¯·æ±‚ â†’ JWTè¿‡æ»¤å™¨ â†’ éªŒè¯ä»¤ç‰Œ â†’ è®¾ç½®å®‰å…¨ä¸Šä¸‹æ–‡ â†’ æ‰§è¡Œä¸šåŠ¡é€»è¾‘
```

---

## ğŸ“ æ–‡æ¡£è¯´æ˜

- **RECOMMENDED_MODULE_INTERFACE.md**: æ¨èæ¨¡å—æ¥å£æ–‡æ¡£
- **OTHER_API_DOC.md**: å…¶ä»–æ¥å£æ–‡æ¡£
- **æŠ€æœ¯æ ˆåˆ—è¡¨åŠå…¶éƒ¨ç½²æ­¥éª¤.docx**: éƒ¨ç½²æ–‡æ¡£

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚

---

**ç¥æ‚¨å­¦ä¹ æ„‰å¿«ï¼ğŸ‰**

å¦‚æœ‰ç–‘é—®ï¼Œæ¬¢è¿æIssueæˆ–è”ç³»å¼€å‘å›¢é˜Ÿã€‚
